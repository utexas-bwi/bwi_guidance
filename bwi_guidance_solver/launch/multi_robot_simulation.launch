<launch>

  <arg name="multimap_file" default="$(find bwi_guidance)/maps/multimap.yaml" />

  <!-- start the simulation environment -->
  <include file="$(find bwi_guidance)/launch/map3_gazebo.launch" />

  <!-- launch the multi map server for the simulated world -->
  <node name="multi_level_map_server" pkg="multi_level_map_server" type="multi_level_map_server">
    <param name="map_file" value="$(arg multimap_file)" />
  </node>

  <node name="multi_robot_launcher" pkg="bwi_launch" type="multi_robot_launcher">
    <rosparam command="load" param="configuration" file="$(find bwi_guidance_solver)/config/simulation.yaml" />
    <param name="launch_file" value="$(find bwi_guidance_solver)/launch/single_robot.launch.xml" />
  </node>

  <!-- Launch the person with their very own map server -->
  <group ns="person">
    <arg name="personid" default="person" />
    <include file="$(find bwi_gazebo_entities)/launch/controllable_person.launch">
      <arg name="x" value="1.2" />
      <arg name="y" value="1.2" />
      <arg name="personid" default="$(arg personid)" />
    </include>
    <node name="odom_to_pose" pkg="bwi_guidance_solver" type="odom_to_pose" />
  </group>

</launch>
